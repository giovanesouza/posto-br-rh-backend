generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mongodb"
  url      = env("DATABASE_URL")
}

// == Data Modeling ==

model User {
  id           String    @id        @default(auto()) @map("_id") @db.ObjectId
  email        String    @unique
  password     String
  isAdmin      Boolean   @default(false)

  @@map("users")
}

model Employee {
  id                  String    @id      @default(auto()) @map("_id") @db.ObjectId
  name                String
  cpf                 String    @unique
  admissionDate       String
  vacations           Vacation[]
  position            Position @relation(fields: [positionId], references: [id])
  positionId          String    @db.ObjectId

  @@map("employees")
}

model Position {
  id                  String    @id     @default(auto()) @map("_id") @db.ObjectId
  name                String
  cbo                 String    @unique
  employees           Employee[]

  @@map("positions")
}

model Vacation {
  id                   String       @id  @default(auto()) @map("_id") @db.ObjectId
  isVacationSold       Boolean      @default(false)
  soldDays             Int          @default(0)
  startDate            DateTime    
  endDate              DateTime
  createdAt            DateTime     @default(now())
  employees            Employee    @relation(fields: [employeeId], references: [id])
  employeeId           String       @db.ObjectId

  @@map("vacation")
}